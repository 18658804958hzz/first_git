<html>
    <head>
        <style>
        *{
            padding:0;
            margin:0;
        }
        </style>        
    </head>
    <body>
        <div id='box'>
        </div>
        <script>   
            var canvas=document.createElement('canvas');  
            canvas.setAttribute('id','myCanvas');

            //  注意一下两种方式给canvas设置宽高的决然不同的效果；
            // canvas.style.width=window.innerWidth;
            // canvas.style.height=window.innerHeight;

            canvas.setAttribute('width',window.innerWidth);
            canvas.setAttribute('height',window.innerHeight);

            box.appendChild(canvas);
            //myCanvas.style.width=window.innerWidth;
            //myCanvas.style.height=window.innerHeight;
/*
            function rand(min,max){
                return Math.round(Math.random()*(max-min)+min);
            }
            var ctx=myCanvas.getContext('2d');

            const canvasWidth=myCanvas.width;
            const canvasHeight=myCanvas.height;
            function Ball(ctx,canvasWidth,canvasHeight){                 
                    this.ctx=ctx;
                    // color
                    this.color=`rgb(${rand(0,255)},${rand(0,255)},${rand(0,255)})`;
                    // 变径 r
                    var r=rand(10,30);
                    //  坐标
                    this.x=rand(r,canvasWidth-r);
                    this.y=rand(r,canvasHeight-r);
                    this.maxWidth=canvasWidth-r;
                    this.maxHeight=canvasHeight-r;

                    // 速度；
                    var speedX=rand(1,3);
                    this.speedX=rand(0,5)>2?speedX:-speedX;
                    var speedY=rand(1,3);
                    this.speedY=rand(0,5)>2?speedY:-speedY;
                    this.r=r;
                    //console.log(this.color,this.speedX,this.speedY,this.x,this.y);
               
                this.draw=function(){
                    this.ctx.beginPath();    
                    //this.ctx.strokeStyle=this.color;     
                    this.ctx.fillStyle=this.color;             
                    this.ctx.arc(this.x,this.y,this.r,0,Math.PI*2,true);
                    
                    this.ctx.closePath();
                    //this.ctx.stroke();                   

                    this.ctx.fill();
                    
                }
                this.move=function(){
                    this.x+=this.speedX;
                    if(this.x>=this.maxWidth){
                        this.speedX *=-1;                        
                    }else if(this.x<=this.r){
                        this.speedX *=-1;     
                    }
                    this.y+=this.speedY;
                    if(this.y>=this.maxHeight){
                        this.speedY *=-1;                        
                    }else if(this.y<=this.r){
                        this.speedY *=-1;     
                    }
                }
                //console.log(this.color,this.speedX,this.speedY,this.x,this.y,canvasWidth,canvasHeight);
            }
            var balls=[];
            for(var a=0;a<100;a++){
                var ball=new Ball(ctx,canvasWidth,canvasHeight);
                balls.push(ball);
            }
            setInterval(function(){
                ctx.clearRect(0,0,canvasWidth,canvasHeight);//console.log(balls);
                for(var a=0;a<balls.length;a++){
                    balls[a].draw();
                    balls[a].move();
                   // console.log(balls[a].ctx);
                }
            },20);

*/
            function rand(min,max){
                return Math.round(Math.random()*(max-min)+min);
            }

            // for(var a=0;a<50;a++){
            //     console.log(rand(1,5)); // 包含1到5；
            // }
            var ctx=myCanvas.getContext('2d');

            const canvasWidth=myCanvas.width;
            const canvasHeight=myCanvas.height;
            class Ball{ 
                constructor(ctx,canvasWidth,canvasHeight){ //console.log(ctx,canvasWidth,canvasHeight);
                    this.ctx=ctx;
                    // color
                    this.color=`rgba(${rand(0,255)},${rand(0,255)},${rand(0,255)},1)`;
                    // 变径 r
                    var r=rand(5,20);
                    this.r=r;
                    //  坐标
                    this.x=rand(r,canvasWidth-r);
                    this.y=rand(r,canvasHeight-2*r);
                    this.maxWidth=canvasWidth-r;
                    this.maxHeight=canvasHeight-2*r;

                    // 速度；
                    var speedX=rand(2,6);
                    this.speedX=rand(0,5)>2?speedX:-speedX;
                    var speedY=rand(2,6);
                    this.speedY=rand(0,5)>2?speedY:-speedY;
                    //console.log(this.color,this.speedX,this.speedY,this.x,this.y);
                }
                draw(){
                    this.ctx.beginPath();
                    this.ctx.fillStyle=this.color;
                    this.ctx.arc(this.x,this.y,this.r,0,Math.PI*2,true);
                    this.ctx.closePath();
                    this.ctx.fill();
                    this.ctx.strokeStyle=this.color;  
                }
                move(){
                    this.x+=this.speedX;
                    if(this.x>=this.maxWidth){
                        this.speedX *=-1;                    
                    }else if(this.x<=this.r){
                        this.speedX *=-1;    
                    }
                    this.y+=this.speedY;
                    if(this.y>=this.maxHeight){
                        this.speedY *=-1;                        
                    }else if(this.y<=this.r){
                        this.speedY *=-1;     
                    }
                }
            }
            var balls=[];
            for(var a=0;a<100;a++){
                var ball=new Ball(ctx,canvasWidth,canvasHeight);
                balls.push(ball);
            }
            setInterval(function(){
                ctx.clearRect(0,0,canvasWidth,canvasHeight);
                for(var a=0;a<balls.length;a++){
                    balls[a].draw();
                    balls[a].move();
                    //console.log(balls[a].ctx);
                }
            },20);
        </script>
    </body>
</html>

